"use strict";(self.webpackChunkecommerce_app=self.webpackChunkecommerce_app||[]).push([[38],{2342:()=>{},3038:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(9379),n=a(5043),i=a(3097),o=(a(9628),a(4556)),l=(a(2342),a(3216)),r=a(854),c=a.n(r),p=a(579);const d=()=>{const{user:e}=(0,o.d4)(e=>(0,s.A)({},e));(0,n.useEffect)(()=>{e&&e.token&&u("/")},[e]);let t=(0,o.wA)();const[a,r]=(0,n.useState)(""),[d,m]=(0,n.useState)("");(0,n.useEffect)(()=>{r(window.localStorage.getItem("emailRegistration"))},[]);const u=(0,l.Zp)();return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"container p-5 ",style:{margin:"0px 400px 100px"},children:[(0,p.jsx)("h4",{children:"Complete Registration"}),(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-mid-3 offset col-mid-6",children:(0,p.jsxs)("form",{onSubmit:async e=>{try{e.preventDefault();if((await i.j.signInWithEmailLink(a,window.location.href)).user.emailVerified){window.localStorage.removeItem("emailRegistration");let e=i.j.currentUser;await e.updatePassword(d);const a=e.getIdTokenResult();(async e=>await c().post("http://localhost:8000/api/create-and-update-user",{},{headers:{authtoken:e}}))(a.token).then(e=>t({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:a.token,role:e.data.role,_id:e.data._id}})),u("/")}}catch(s){console.log(s)}},children:[(0,p.jsx)("input",{type:"email",className:"form-control",style:{width:"600px",margin:"10px 0px 0px 0px"},value:a,disabled:!0}),(0,p.jsx)("input",{type:"password",className:"form-control",style:{width:"600px",margin:"10px 0px 0px 0px"},value:d,onChange:e=>{m(e.target.value)},autoFocus:!0}),(0,p.jsx)("button",{type:"submit",value:"submit",className:"btn btn-raised",style:{margin:"20px 0px 0px 0px"},children:"Sign in"})]})})})]})})}}}]);
//# sourceMappingURL=38.f3d436f9.chunk.js.map