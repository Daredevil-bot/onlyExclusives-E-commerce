{"version":3,"file":"static/js/38.f3d436f9.chunk.js","mappings":"2PAQA,MAsGA,EAtGyBA,KAErB,MAAM,KAACC,IAAQC,EAAAA,EAAAA,IAAaC,IAAKC,EAAAA,EAAAA,GAAA,GAAQD,KAC7CE,EAAAA,EAAAA,WAAU,KACHJ,GAAQA,EAAKK,OAAQC,EAAS,MACnC,CAACN,IACH,IAAIO,GAASC,EAAAA,EAAAA,MAEb,MAWMC,EAAMC,IAAUC,EAAAA,EAAAA,UAAS,KACzBC,EAAKC,IAASF,EAAAA,EAAAA,UAAS,KAC7BP,EAAAA,EAAAA,WAAU,KACVM,EAASI,OAAOC,aAAaC,QAAQ,uBACnC,IACF,MAAMV,GAAUW,EAAAA,EAAAA,MAyCZ,OACIC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACDC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAiBC,MAAO,CAACC,OAAO,mBAAmBJ,SAAA,EAC9DF,EAAAA,EAAAA,KAAA,MAAAE,SAAK,2BAETF,EAAAA,EAAAA,KAAA,OAAKI,UAAU,MAAKF,UAChBF,EAAAA,EAAAA,KAAA,OAAKI,UAAU,6BAA4BF,UAG/CC,EAAAA,EAAAA,MAAA,QAAMI,SAjDKC,UACd,IACAC,EAAEC,iBAEH,UADmBC,EAAAA,EAAKC,oBAAoBrB,EAAMK,OAAOiB,SAASC,OACxDhC,KAAKiC,cAAc,CAEzBnB,OAAOC,aAAamB,WAAW,qBAE/B,IAAIlC,EAAK6B,EAAAA,EAAKM,kBACRnC,EAAKoC,eAAexB,GAC1B,MAAMyB,EAASrC,EAAKsC,mBA3BRZ,gBACFa,IAAAA,KAAW,mDAAmD,CAAC,EAAE,CAC1EC,QAAQ,CACJC,eAyBLC,CAAaL,EAAQhC,OAEpBsC,KAAKC,GAELrC,EAAS,CACLsC,KAAM,iBACNC,QAAS,CACLC,KAAKH,EAAII,KAAKD,KACdtC,MAAMmC,EAAII,KAAKvC,MACfJ,MAAMgC,EAAQhC,MACd4C,KAAKL,EAAII,KAAKC,KACdC,IAAIN,EAAII,KAAKE,QAKtB5C,EAAS,IACX,CACD,CAEA,MAAM6C,GACFC,QAAQC,IAAIF,EAChB,GAgB+B/B,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACA2B,KAAK,QACLvB,UAAU,eACVC,MAAO,CAAC+B,MAAM,QAAQ9B,OAAO,oBAC7B+B,MAAO9C,EACP+C,UAAQ,KAERtC,EAAAA,EAAAA,KAAA,SACA2B,KAAK,WACLvB,UAAU,eACVC,MAAO,CAAC+B,MAAM,QAAQ9B,OAAO,oBAC7B+B,MAAO3C,EACP6C,SAAU9B,IAAId,EAAQc,EAAE+B,OAAOH,QAC/BI,WAAS,KAETzC,EAAAA,EAAAA,KAAA,UAAQ2B,KAAK,SAASU,MAAM,SAASjC,UAAU,iBAAgBC,MAAO,CAACC,OAAO,oBAAoBJ,SAAC,wB","sources":["pages/auth/CompleteRegister.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\nimport  {auth} from \"../../firebase\"\nimport {toast} from \"react-toastify\"\nimport { useDispatch,useSelector } from 'react-redux'\nimport \"react-toastify/dist/ReactToastify.css\"\nimport {useNavigate} from \"react-router-dom\"\n\nimport axios from \"axios\"\nconst CompleteRegister = () => {\n    \n    const {user} = useSelector((state)=>({...state}))\nuseEffect(()=>{\n    if(user && user.token ) navigate('/')\n},[user])\nlet dispatch=useDispatch()\n\nconst createUpdate=async (authtoken)=>{\n    return await axios.post(\"http://localhost:8000/api/create-and-update-user\",{},{              //axios is sending request to middleware having url as first argument   \n        headers:{\n            authtoken\n        }\n    } )\n}    \n\n\n\n\nconst[email,setemail]=useState('');\nconst[pass,setpass]=useState('')\nuseEffect(()=>{\nsetemail(window.localStorage.getItem(\"emailRegistration\"))\n},[])\nconst navigate =useNavigate();\nconst handleClick=async (e)=>{\n    try{\n    e.preventDefault();\n   const result=await auth.signInWithEmailLink(email,window.location.href)\n   if(result.user.emailVerified){\n       //REMOVE EMAIL FROM LOCAL STORAGE\n       window.localStorage.removeItem('emailRegistration')\n       //GET USER TOKEN ID FOR USING IN REDUX STORE FOR FUTURE USE and also update password for future verification\n       let user=auth.currentUser;\n       await user.updatePassword(pass)\n       const idToken =user.getIdTokenResult();\n       createUpdate(idToken.token)\n       \n       .then(res=>\n        \n        dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload :{                                //res here deines response from backend as axios made a post request\n                name:res.data.name,\n                email:res.data.email,\n                token:idToken.token,\n                role:res.data.role,\n                _id:res.data._id\n            }\n        })\n        \n       )\n       navigate('/')\n     }\n    }\n\n    catch(error){\n        console.log(error)\n    }\n   \n}\n\n    \n\n    \n    return (\n        <>\n       <div className=\"container p-5 \" style={{margin:\"0px 400px 100px\"}} >\n           <h4 >Complete Registration</h4>\n\n       <div className='row'>\n           <div className='col-mid-3 offset col-mid-6'>\n               \n      \n       <form onSubmit={handleClick} >\n            <input\n            type='email'\n            className='form-control'\n            style={{width:\"600px\",margin:\"10px 0px 0px 0px\"}}\n            value={email}\n            disabled\n            ></input>\n            <input\n            type='password'\n            className='form-control'\n            style={{width:\"600px\",margin:\"10px 0px 0px 0px\"}}\n            value={pass}\n            onChange={e=>{setpass(e.target.value)}}\n            autoFocus\n            ></input>\n            <button type='submit' value='submit' className='btn btn-raised'style={{margin:\"20px 0px 0px 0px\"}}>Sign in</button>\n\n        </form>\n        </div>\n       </div>\n       \n       </div>\n\n        </>\n    )\n}\n\nexport default CompleteRegister;\n"],"names":["CompleteRegister","user","useSelector","state","_objectSpread","useEffect","token","navigate","dispatch","useDispatch","email","setemail","useState","pass","setpass","window","localStorage","getItem","useNavigate","_jsx","_Fragment","children","_jsxs","className","style","margin","onSubmit","async","e","preventDefault","auth","signInWithEmailLink","location","href","emailVerified","removeItem","currentUser","updatePassword","idToken","getIdTokenResult","axios","headers","authtoken","createUpdate","then","res","type","payload","name","data","role","_id","error","console","log","width","value","disabled","onChange","target","autoFocus"],"sourceRoot":""}