"use strict";(self.webpackChunkecommerce_app=self.webpackChunkecommerce_app||[]).push([[190],{2342:()=>{},2701:(e,a,t)=>{t.d(a,{Ob:()=>s,zO:()=>o,zv:()=>r});var n=t(5043),o=n.isValidElement;function r(e){return e&&o(e)&&e.type===n.Fragment}function s(e,a){return function(e,a,t){return o(e)?n.cloneElement(e,"function"===typeof t?t(e.props||{}):t):a}(e,e,a)}},7063:(e,a,t)=>{t.d(a,{A:()=>s,c:()=>r});var n=t(5043),o=n.createContext(void 0),r=function(e){var a=e.children,t=e.size;return n.createElement(o.Consumer,null,function(e){return n.createElement(o.Provider,{value:t||e},a)})};const s=o},7763:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var n=t(9379),o=t(5043),r=t(3097),s=t(9628),l=(t(2342),t(9421));const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};var i=t(2172),d=function(e,a){return o.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:a,icon:c}))};const p=o.forwardRef(d);const m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"};var u=function(e,a){return o.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:a,icon:m}))};const h=o.forwardRef(u);var x=t(4556),g=t(3216),f=t(5475),y=t(854),w=t.n(y),v=t(579);const k=()=>{let e=(0,g.Zp)();const a=a=>{let t=e.location.state;t?e(t.from):"admin"===a.data.role?e("/admin/dashboard"):e("/user/history")},{user:t}=(0,x.d4)(e=>(0,n.A)({},e));(0,o.useEffect)(()=>{t&&t.token&&e("/")},[t,e]);const c=async e=>await w().post("http://localhost:8000/api/create-and-update-user",{},{headers:{authtoken:e}}),[i,d]=(0,o.useState)(""),[m,u]=(0,o.useState)("");let y=(0,x.wA)();const k=async e=>{try{const e=await r.j.signInWithEmailAndPassword(i,m),{user:t}=e,n=await t.getIdTokenResult();c(n.token).then(e=>{y({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:n.token,role:e.data.role,_id:e.data._id}}),a(e)}).catch(e=>console.log(e))}catch(t){console.log(t),s.oR.error(t.message)}};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"container p-5 ",style:{margin:"0px 400px 100px"},children:[(0,v.jsx)("h4",{children:"Login"}),(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-mid-3 offset col-mid-6",children:(0,v.jsxs)("form",{onSubmit:k,children:[(0,v.jsx)("input",{type:"email",className:"form-control",style:{width:"600px",margin:"20px 0px 0px 0px"},value:i,onChange:e=>{d(e.target.value)},placeholder:"Your email",autoFocus:!0}),(0,v.jsx)("input",{type:"password",className:"form-control",style:{width:"600px",margin:"25px 0px 0px 0px"},value:m,onChange:e=>{u(e.target.value)},placeholder:"Your password"}),(0,v.jsx)(l.A,{type:"primary",className:"mb-3",style:{width:"600px",margin:"30px 0px 0px 0px",display:"block"},shape:"round",size:"large",width:"600px",block:!0,icon:(0,v.jsx)(p,{}),disabled:!i||!m,onClick:k,children:"Log in with Email/Password"}),(0,v.jsx)(l.A,{type:"danger",className:"mb-3",style:{width:"600px",margin:"25px 0px 0px 0px"},shape:"round",size:"large",width:"600px",block:!0,icon:(0,v.jsx)(h,{}),onClick:async t=>{r.j.signInWithPopup(r.p).then(async t=>{const{user:n}=t,o=await n.getIdTokenResult();c(o.token).then(t=>{y({type:"LOGGED_IN_USER",payload:{name:t.data.name,email:t.data.email,token:o.token,role:t.data.role,_id:t.data._id}}),e("/"),a(t)})}).catch(e=>{console.log(e),s.oR.error(e.message)})},children:"Log in with Google"}),(0,v.jsxs)(l.A,{type:"link",style:{display:"block",margin:"0px 0px 0px 450px"},children:[(0,v.jsx)(f.N_,{to:"/forgot/password"}),"Forgot password? "]})]})})})]})})}},8574:(e,a,t)=>{function n(e,a){var t=Object.assign({},e);return Array.isArray(a)&&a.forEach(function(e){delete t[e]}),t}t.d(a,{A:()=>n})}}]);
//# sourceMappingURL=190.0c51412c.chunk.js.map